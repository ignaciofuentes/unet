<% content_for :head do%>
<%= javascript_include_tag "jquery.dependent" %>
<script type="text/javascript">
$(function(){
$('#user_universidad_id').dependent({ parent: 'user_estado_id', group: 'selectable' });
$('#user_grupo_estudiantil_id').dependent({ parent: 'user_universidad_id', group: 'selectable' });
})
</script>
<% end %>

<h1>Registro de Usuario</h1>
<% form_for @user, :html=> {:multipart=>true}  do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :login %><br />
    <%= f.text_field :login %>
  </p>
    <p>
    <%= f.label :photo %><br />
    <%= f.file_field :photo %>
  </p>
  <p>
	<%= f.label :password, f.object.new_record? ? nil : "Change password" %><br />
	<%= f.password_field :password %><br />
	</p>
	<p>
	<%= f.label :password_confirmation %><br />
	<%= f.password_field :password_confirmation %><br />
	</p>
  <p>
    <%= f.label :nombre %><br />
    <%= f.text_field :nombre %>	
  </p>
  <p>
    <%= f.label :apellido %><br />
    <%= f.text_field :apellido %>	
  </p>
  <p>
    <%= f.label :cedula %><br />
    <%= f.text_field :cedula %>	
  </p>
  <p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>	
  </p>
  <p>
    <%if has_role? :admin%>
  <%= f.label :role_ids, "Roles" %><br />
<%= f.collection_select(:role_ids,Role.all,:id,:name) %><br />
</p>
<p>
  <%= label_tag :universidad_universidad_id, "Estados" %><br />
<%= collection_select_with_title("user",:estado_id,Estado.all, :id, :nombre) %><br />
</p>
  <p>
  <%= label_tag :universidad_universidad_id, "Universidades" %><br />
<%= collection_select_with_title_and_class("user",:universidad_id,Universidad.all, :id, :nombre, :estado, :nombre) %><br />
</p>
<p>
<%= f.label :grupo_estudiantil_id %><br />
<%= collection_select_with_title_and_class("user", :grupo_estudiantil_id,GrupoEstudiantil.all,:id,:nombre, :universidad, :nombre) %>
</p>
<%end%>
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>
<br />